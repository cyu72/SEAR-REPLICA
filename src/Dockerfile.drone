# Really need to slim down this image...really big for no reason..
FROM alpine:latest

WORKDIR /app

COPY drone/*.cpp drone/*.hpp drone/CMakeLists.txt drone/initScript.py /app/

RUN apk add g++ bind-tools make cmake protobuf protobuf-dev git openssl-dev python3 py3-pip

RUN python3 -m venv /app/venv
ENV PATH="/app/venv/bin:$PATH"

RUN pip3 install flask
    
RUN cmake .

RUN make

EXPOSE 65456

CMD ["python3", "initScript.py"]